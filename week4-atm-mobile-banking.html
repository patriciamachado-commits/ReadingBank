<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Week 4: ATMs and Mobile Banking</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#0f766e;
  --primary-light:#14b8a6;
  --primary-dark:#134e4a;
  --accent:#f59e0b;
  --bg:#f0fdfa;
  --card:#ffffff;
  --text:#134e4a;
  --text-light:#5f9ea0;
  --success:#10b981;
  --error:#ef4444;
  --border:#99f6e4;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'DM Sans',system-ui,sans-serif;
  background:var(--bg);
  min-height:100vh;
  color:var(--text);
  line-height:1.6;
}
.container{
  max-width:700px;
  margin:0 auto;
  padding:20px;
  min-height:100vh;
}
.header{
  text-align:center;
  padding:30px 0;
}
.week-badge{
  display:inline-block;
  background:var(--primary);
  color:#fff;
  font-size:0.8rem;
  font-weight:600;
  padding:6px 14px;
  border-radius:20px;
  margin-bottom:12px;
  letter-spacing:0.5px;
}
h1{
  font-family:'DM Serif Display',serif;
  font-size:2rem;
  color:var(--primary-dark);
  margin-bottom:8px;
}
.subtitle{
  font-size:1rem;
  color:var(--text-light);
}
.card{
  background:var(--card);
  border:2px solid var(--border);
  border-radius:16px;
  padding:24px;
  margin-bottom:20px;
  box-shadow:0 4px 20px rgba(15,118,110,0.08);
}
.form-group{
  margin-bottom:20px;
}
.form-label{
  display:block;
  font-weight:600;
  margin-bottom:8px;
  color:var(--primary-dark);
}
.form-input{
  width:100%;
  padding:14px 16px;
  border:2px solid var(--border);
  border-radius:10px;
  font-size:1rem;
  font-family:inherit;
  transition:all 0.2s;
}
.form-input:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 4px rgba(15,118,110,0.1);
}
.level-grid{
  display:grid;
  gap:12px;
}
.level-btn{
  background:linear-gradient(135deg,#f0fdfa,#ccfbf1);
  border:2px solid var(--border);
  border-radius:12px;
  padding:18px;
  cursor:pointer;
  text-align:left;
  transition:all 0.2s;
}
.level-btn:hover{
  border-color:var(--primary);
  transform:translateY(-2px);
  box-shadow:0 4px 15px rgba(15,118,110,0.15);
}
.level-btn.selected{
  border-color:var(--primary);
  background:linear-gradient(135deg,#ccfbf1,#99f6e4);
}
.level-name{
  font-weight:700;
  font-size:1.1rem;
  color:var(--primary-dark);
  margin-bottom:4px;
}
.level-desc{
  font-size:0.9rem;
  color:var(--text-light);
}
.btn{
  padding:14px 28px;
  border-radius:10px;
  border:none;
  font-size:1rem;
  font-weight:600;
  cursor:pointer;
  transition:all 0.2s;
  font-family:inherit;
}
.btn-primary{
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  box-shadow:0 4px 15px rgba(15,118,110,0.3);
  width:100%;
}
.btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(15,118,110,0.4);
}
.btn-primary:disabled{
  opacity:0.5;
  cursor:not-allowed;
  transform:none;
}
.video-container{
  background:#000;
  border-radius:12px;
  overflow:hidden;
  margin:20px 0;
  aspect-ratio:16/9;
  display:flex;
  align-items:center;
  justify-content:center;
}
.video-container iframe{
  width:100%;
  height:100%;
  border:none;
}
.video-placeholder{
  color:#fff;
  text-align:center;
  padding:40px;
}
.video-placeholder-icon{
  font-size:4rem;
  margin-bottom:15px;
}
.video-placeholder-text{
  font-size:1.1rem;
  opacity:0.8;
}
.reading-content{
  background:linear-gradient(135deg,#f0fdf4,#dcfce7);
  border:2px solid #86efac;
  border-radius:12px;
  padding:24px;
  margin:20px 0;
  line-height:1.8;
}
.reading-title{
  font-family:'DM Serif Display',serif;
  font-size:1.4rem;
  color:#166534;
  margin-bottom:15px;
  display:flex;
  align-items:center;
  gap:10px;
}
.story-text{
  color:#166534;
  margin-bottom:15px;
  font-size:1.05rem;
}
.story-text p{
  margin-bottom:12px;
}
.vocab-box{
  background:rgba(255,255,255,0.7);
  border-left:4px solid #22c55e;
  padding:15px;
  margin:20px 0;
  border-radius:0 8px 8px 0;
}
.vocab-title{
  font-weight:700;
  color:#15803d;
  margin-bottom:10px;
  font-size:1rem;
}
.vocab-item{
  margin-bottom:8px;
  font-size:0.95rem;
  color:#166534;
}
.vocab-item strong{
  color:#15803d;
}
.steps-box{
  background:rgba(255,255,255,0.6);
  border-radius:10px;
  padding:15px;
  margin:15px 0;
}
.steps-title{
  font-weight:700;
  color:#15803d;
  margin-bottom:12px;
}
.step-item{
  display:flex;
  align-items:flex-start;
  gap:12px;
  padding:10px 0;
  border-bottom:1px solid rgba(34,197,94,0.2);
}
.step-item:last-child{
  border-bottom:none;
}
.step-num{
  background:#22c55e;
  color:#fff;
  width:26px;
  height:26px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:0.85rem;
  flex-shrink:0;
}
.step-text{
  color:#166534;
}
.tip-box{
  background:rgba(251,191,36,0.2);
  border-left:4px solid #f59e0b;
  padding:12px 15px;
  margin:15px 0;
  border-radius:0 8px 8px 0;
}
.tip-box strong{
  color:#b45309;
}
.tip-box p{
  color:#92400e;
  margin:0;
}
.question-card{
  background:#fff;
  border:2px solid var(--border);
  border-radius:12px;
  padding:20px;
  margin-bottom:15px;
}
.question-num{
  display:inline-block;
  background:var(--primary);
  color:#fff;
  width:28px;
  height:28px;
  border-radius:50%;
  text-align:center;
  line-height:28px;
  font-weight:600;
  font-size:0.9rem;
  margin-right:10px;
}
.question-text{
  font-weight:600;
  color:var(--primary-dark);
  margin-bottom:15px;
  font-size:1.05rem;
}
.options{
  display:grid;
  gap:10px;
}
.option{
  display:flex;
  align-items:center;
  gap:12px;
  padding:14px 16px;
  background:#f0fdfa;
  border:2px solid var(--border);
  border-radius:10px;
  cursor:pointer;
  transition:all 0.2s;
}
.option:hover{
  border-color:var(--primary-light);
  background:#ccfbf1;
}
.option.selected{
  border-color:var(--primary);
  background:#ccfbf1;
}
.option-letter{
  width:28px;
  height:28px;
  border-radius:50%;
  background:var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  font-size:0.9rem;
  color:var(--primary-dark);
}
.option.selected .option-letter{
  background:var(--primary);
  color:#fff;
}
.option-text{
  flex:1;
  color:var(--text);
}
.progress-bar{
  background:var(--border);
  border-radius:10px;
  height:10px;
  margin-bottom:20px;
  overflow:hidden;
}
.progress-fill{
  background:linear-gradient(90deg,var(--primary-light),var(--primary));
  height:100%;
  transition:width 0.3s ease;
}
.progress-text{
  text-align:center;
  font-size:0.9rem;
  color:var(--text-light);
  margin-bottom:10px;
}
.results-card{
  text-align:center;
  padding:30px 20px;
}
.results-icon{
  font-size:4rem;
  margin-bottom:15px;
}
.results-title{
  font-family:'DM Serif Display',serif;
  font-size:1.8rem;
  color:var(--primary-dark);
  margin-bottom:10px;
}
.results-score{
  font-size:3rem;
  font-weight:700;
  color:var(--primary);
  margin:15px 0;
}
.results-message{
  font-size:1.1rem;
  color:var(--text-light);
  margin-bottom:25px;
}
.results-details{
  background:#f0fdfa;
  border-radius:10px;
  padding:15px;
  margin:20px 0;
  text-align:left;
}
.results-row{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid var(--border);
}
.results-row:last-child{
  border-bottom:none;
}
.nav-row{
  display:flex;
  gap:10px;
  margin-top:20px;
}
.nav-row .btn{
  flex:1;
}
.btn-secondary{
  background:#f0fdfa;
  color:var(--primary);
  border:2px solid var(--border);
}
.btn-secondary:hover{
  background:#ccfbf1;
  border-color:var(--primary);
}
.audio-btn{
  background:rgba(15,118,110,0.1);
  border:1px solid var(--border);
  color:var(--primary);
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-size:0.9rem;
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-bottom:15px;
  transition:all 0.2s;
}
.audio-btn:hover{
  background:rgba(15,118,110,0.2);
}
.footer-note{
  text-align:center;
  padding:20px;
  color:var(--text-light);
  font-size:0.85rem;
}
.submitted-msg{
  background:#d1fae5;
  border:2px solid #10b981;
  border-radius:10px;
  padding:15px;
  text-align:center;
  color:#065f46;
  margin-top:20px;
}
.watch-note{
  background:rgba(59,130,246,0.1);
  border:2px solid rgba(59,130,246,0.3);
  border-radius:10px;
  padding:15px;
  margin:15px 0;
  text-align:center;
}
.watch-note-icon{
  font-size:1.5rem;
  margin-bottom:8px;
}
.watch-note-text{
  color:#1e40af;
  font-size:0.95rem;
}
</style>
</head>
<body>
<div class="container" id="app"></div>

<script>
// VIDEO URLs - YOUR DESCRIPT VIDEOS
const VIDEO_URLS = {
  A1: "https://www.youtube.com/embed/dsscsFoLVYY",
  A2B1: "https://www.youtube.com/embed/ZIfaIZI8NDg",
  B2C1: "https://www.youtube.com/embed/xFi8xbIakPw"
};

// READING CONTENT FOR EACH LEVEL
const READINGS = {
  A1: {
    title: "Using an ATM",
    content: `
      <div class="story-text">
        <p>An ATM is a machine. ATM means "Automatic Teller Machine." You can use an ATM to get money from your bank account. ATMs are everywhere: at banks, stores, and gas stations.</p>
        
        <p>You need two things to use an ATM:</p>
        <p>1. Your debit card</p>
        <p>2. Your PIN (a 4-number code)</p>
      </div>
      
      <div class="steps-box">
        <div class="steps-title">üèß How to Use an ATM:</div>
        <div class="step-item">
          <span class="step-num">1</span>
          <span class="step-text">Put your card in the machine</span>
        </div>
        <div class="step-item">
          <span class="step-num">2</span>
          <span class="step-text">Enter your PIN (4 numbers)</span>
        </div>
        <div class="step-item">
          <span class="step-num">3</span>
          <span class="step-text">Choose what you want to do (get money, check balance)</span>
        </div>
        <div class="step-item">
          <span class="step-num">4</span>
          <span class="step-text">Take your money and card</span>
        </div>
        <div class="step-item">
          <span class="step-num">5</span>
          <span class="step-text">Take your receipt</span>
        </div>
      </div>
      
      <div class="tip-box">
        <strong>‚ö†Ô∏è Safety Tips:</strong>
        <p>‚Ä¢ Hide your PIN when you type it</p>
        <p>‚Ä¢ Don't let strangers help you</p>
        <p>‚Ä¢ Use ATMs in safe, bright places</p>
      </div>
      
      <div class="vocab-box">
        <div class="vocab-title">üìö Vocabulary Help:</div>
        <div class="vocab-item"><strong>ATM</strong> = a machine to get money</div>
        <div class="vocab-item"><strong>debit card</strong> = a card connected to your bank account</div>
        <div class="vocab-item"><strong>PIN</strong> = Personal Identification Number (your secret code)</div>
        <div class="vocab-item"><strong>receipt</strong> = paper that shows your transaction</div>
        <div class="vocab-item"><strong>balance</strong> = how much money you have</div>
      </div>
    `
  },
  A2B1: {
    title: "ATMs and Mobile Banking Apps",
    content: `
      <div class="story-text">
        <p>Today, you don't always need to go to a bank. You can manage your money using ATMs and mobile banking apps. Let's learn about both!</p>
        
        <h3 style="color:#15803d;margin:20px 0 10px;">üèß Using ATMs</h3>
        <p>ATMs let you do many things without talking to a bank employee:</p>
        <p>‚Ä¢ Withdraw cash (take money out)</p>
        <p>‚Ä¢ Deposit cash or checks (put money in)</p>
        <p>‚Ä¢ Check your account balance</p>
        <p>‚Ä¢ Transfer money between accounts</p>
        
        <p><strong>ATM Fees:</strong> Be careful! If you use an ATM that is not from your bank, you may pay a fee. This fee can be $2 to $5. Your own bank might also charge you a fee. To avoid fees, use your bank's ATMs.</p>
        
        <h3 style="color:#15803d;margin:20px 0 10px;">üì± Mobile Banking Apps</h3>
        <p>Most banks have free apps for your phone. With a mobile banking app, you can:</p>
        <p>‚Ä¢ Check your balance anytime</p>
        <p>‚Ä¢ See all your transactions</p>
        <p>‚Ä¢ Transfer money to other people</p>
        <p>‚Ä¢ Pay bills</p>
        <p>‚Ä¢ Deposit checks using your phone camera</p>
        <p>‚Ä¢ Lock your card if you lose it</p>
      </div>
      
      <div class="steps-box">
        <div class="steps-title">üì± How to Deposit a Check with Your Phone:</div>
        <div class="step-item">
          <span class="step-num">1</span>
          <span class="step-text">Open your bank's app</span>
        </div>
        <div class="step-item">
          <span class="step-num">2</span>
          <span class="step-text">Choose "Deposit Check" or "Mobile Deposit"</span>
        </div>
        <div class="step-item">
          <span class="step-num">3</span>
          <span class="step-text">Sign the back of the check and write "For Mobile Deposit"</span>
        </div>
        <div class="step-item">
          <span class="step-num">4</span>
          <span class="step-text">Take a photo of the front and back of the check</span>
        </div>
        <div class="step-item">
          <span class="step-num">5</span>
          <span class="step-text">Enter the amount and submit</span>
        </div>
      </div>
      
      <div class="tip-box">
        <strong>üí° Security Tips:</strong>
        <p>‚Ä¢ Use a strong password for your banking app</p>
        <p>‚Ä¢ Turn on fingerprint or face ID if possible</p>
        <p>‚Ä¢ Never share your login information</p>
        <p>‚Ä¢ Log out when you finish</p>
      </div>
      
      <div class="vocab-box">
        <div class="vocab-title">üìö Vocabulary Help:</div>
        <div class="vocab-item"><strong>withdraw</strong> = take money out of your account</div>
        <div class="vocab-item"><strong>deposit</strong> = put money into your account</div>
        <div class="vocab-item"><strong>transfer</strong> = move money from one account to another</div>
        <div class="vocab-item"><strong>transaction</strong> = any activity with your money (deposit, withdrawal, payment)</div>
        <div class="vocab-item"><strong>mobile deposit</strong> = depositing a check using your phone's camera</div>
      </div>
    `
  },
  B2C1: {
    title: "The Evolution of Banking: From ATMs to Digital Wallets",
    content: `
      <div class="story-text">
        <p>Banking technology has transformed dramatically over the past few decades. Understanding these changes can help you make the most of modern financial tools while staying safe.</p>
        
        <h3 style="color:#15803d;margin:20px 0 10px;">üèß The ATM Revolution</h3>
        <p>When ATMs first appeared in the 1960s, they were revolutionary. For the first time, customers could access their money outside of banking hours. Today's ATMs offer sophisticated features including cardless transactions using smartphone apps, biometric authentication, and even video conferencing with bank representatives.</p>
        
        <p>However, ATM usage comes with costs. Out-of-network fees average $4.73 per transaction in the United States, with some locations charging over $5. Smart consumers minimize these fees by using in-network ATMs, getting cash back at retail stores, or withdrawing larger amounts less frequently.</p>
        
        <h3 style="color:#15803d;margin:20px 0 10px;">üì± Mobile Banking: Beyond Basic Transactions</h3>
        <p>Mobile banking has evolved from simple balance checking to comprehensive financial management platforms. Advanced features now include:</p>
        
        <p><strong>Real-time notifications:</strong> Instant alerts for every transaction help you monitor spending and detect fraud immediately.</p>
        
        <p><strong>Peer-to-peer payments:</strong> Services like Zelle, integrated into many banking apps, allow instant money transfers to friends and family using just their phone number or email.</p>
        
        <p><strong>AI-powered insights:</strong> Many apps now analyze your spending patterns and offer personalized budgeting recommendations.</p>
        
        <p><strong>Card controls:</strong> Temporarily freeze your card, set spending limits by category, or restrict international transactions directly from your phone.</p>
        
        <h3 style="color:#15803d;margin:20px 0 10px;">üí≥ Digital Wallets and Contactless Payments</h3>
        <p>Digital wallets like Apple Pay, Google Pay, and Samsung Pay have added another layer to banking convenience. These services tokenize your card information, meaning your actual card number is never shared with merchants. This provides enhanced security compared to traditional card swipes.</p>
        
        <p>Contactless payments using NFC (Near Field Communication) technology have accelerated since the COVID-19 pandemic, with many consumers now preferring tap-to-pay options for their speed and hygiene benefits.</p>
      </div>
      
      <div class="tip-box">
        <strong>üîí Advanced Security Practices:</strong>
        <p>‚Ä¢ Enable two-factor authentication (2FA) on all financial accounts</p>
        <p>‚Ä¢ Use unique, complex passwords managed by a password manager</p>
        <p>‚Ä¢ Regularly review account statements for unauthorized transactions</p>
        <p>‚Ä¢ Be cautious of phishing attempts via email, text, or phone calls</p>
        <p>‚Ä¢ Keep your phone's operating system and apps updated</p>
      </div>
      
      <div class="vocab-box">
        <div class="vocab-title">üìö Vocabulary Help:</div>
        <div class="vocab-item"><strong>biometric authentication</strong> = using fingerprints, face recognition, or other body features to verify identity</div>
        <div class="vocab-item"><strong>out-of-network</strong> = ATMs not owned by your bank</div>
        <div class="vocab-item"><strong>peer-to-peer payments</strong> = sending money directly from one person to another</div>
        <div class="vocab-item"><strong>tokenize</strong> = replace sensitive data with a unique code for security</div>
        <div class="vocab-item"><strong>NFC</strong> = Near Field Communication; technology for contactless payments</div>
        <div class="vocab-item"><strong>two-factor authentication</strong> = requiring two forms of verification to access an account</div>
        <div class="vocab-item"><strong>phishing</strong> = fraudulent attempts to steal personal information</div>
      </div>
    `
  }
};

// QUESTIONS FOR EACH LEVEL
const QUESTIONS = {
  A1: [
    {
      q: "What does ATM mean?",
      options: ["Always Take Money", "Automatic Teller Machine", "American Transaction Machine", "Any Time Money"],
      correct: 1
    },
    {
      q: "What two things do you need to use an ATM?",
      options: ["Cash and ID", "Debit card and PIN", "Credit card and password", "Phone and email"],
      correct: 1
    },
    {
      q: "What is a PIN?",
      options: ["A type of card", "A 4-number secret code", "A receipt", "A bank employee"],
      correct: 1
    },
    {
      q: "What should you do with your PIN at the ATM?",
      options: ["Say it loud", "Write it on your card", "Hide it when you type", "Share it with friends"],
      correct: 2
    },
    {
      q: "Where can you find ATMs?",
      options: ["Only at banks", "Only at stores", "At banks, stores, and gas stations", "Only at airports"],
      correct: 2
    }
  ],
  A2B1: [
    {
      q: "What can you NOT do at an ATM?",
      options: ["Withdraw cash", "Deposit checks", "Apply for a loan", "Check your balance"],
      correct: 2
    },
    {
      q: "How much can ATM fees be if you use a different bank's ATM?",
      options: ["Always free", "$2 to $5", "$10 to $20", "$50"],
      correct: 1
    },
    {
      q: "How can you avoid ATM fees?",
      options: ["Use any ATM", "Use your bank's ATMs", "Use ATMs at night", "Use ATMs in other countries"],
      correct: 1
    },
    {
      q: "What should you write on the back of a check for mobile deposit?",
      options: ["Your phone number", "The date", "For Mobile Deposit", "Your email"],
      correct: 2
    },
    {
      q: "Which is NOT a feature of mobile banking apps?",
      options: ["Check your balance", "Pay bills", "Get a new debit card instantly", "Lock your card if you lose it"],
      correct: 2
    }
  ],
  B2C1: [
    {
      q: "What is the average out-of-network ATM fee in the United States?",
      options: ["$1.50", "$2.99", "$4.73", "$7.50"],
      correct: 2
    },
    {
      q: "What does 'tokenization' do in digital wallets?",
      options: ["Adds extra fees to transactions", "Replaces your card number with a unique code for security", "Makes payments slower", "Requires you to enter your PIN twice"],
      correct: 1
    },
    {
      q: "What technology enables contactless 'tap-to-pay' transactions?",
      options: ["Bluetooth", "WiFi", "NFC (Near Field Communication)", "GPS"],
      correct: 2
    },
    {
      q: "What is 'two-factor authentication'?",
      options: ["Using two different credit cards", "Requiring two forms of verification to access an account", "Making two payments at once", "Having two bank accounts"],
      correct: 1
    },
    {
      q: "According to the article, what factor accelerated the adoption of contactless payments?",
      options: ["Lower fees", "The COVID-19 pandemic", "Government regulations", "New smartphone designs"],
      correct: 1
    }
  ]
};

// GOOGLE FORM URL
const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdAToQoJmHyWuL7ifDiwrdy0fs9-2ha68SI2Uo-1Jg9kFJRHg/formResponse";
// Field entry IDs
const FORM_FIELDS = {
  week: "entry.1442329542",
  name: "entry.683356736",
  level: "entry.171721789",
  score: "entry.413464778",
  total: "entry.971702683"
};
const CURRENT_WEEK = "Week 4";

let state = {
  screen: 'start',
  name: '',
  level: null,
  currentQuestion: 0,
  answers: [],
  submitted: false
};

function speak(text) {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel();
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 0.85;
    utterance.lang = 'en-US';
    window.speechSynthesis.speak(utterance);
  }
}

function speakReading() {
  const reading = READINGS[state.level];
  const text = reading.content.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
  speak(text);
}

function render() {
  const app = document.getElementById('app');
  
  if (state.screen === 'start') {
    app.innerHTML = renderStart();
  } else if (state.screen === 'video') {
    app.innerHTML = renderVideo();
  } else if (state.screen === 'reading') {
    app.innerHTML = renderReading();
  } else if (state.screen === 'questions') {
    app.innerHTML = renderQuestions();
  } else if (state.screen === 'results') {
    app.innerHTML = renderResults();
  }
}

function renderStart() {
  return `
    <div class="header">
      <span class="week-badge">WEEK 4</span>
      <h1>ATMs and Mobile Banking</h1>
      <p class="subtitle">Banking & Money Management</p>
    </div>
    
    <div class="card">
      <div class="form-group">
        <label class="form-label">Your Full Name</label>
        <input type="text" class="form-input" id="nameInput" placeholder="Enter your full name" value="${state.name}">
      </div>
      
      <div class="form-group">
        <label class="form-label">Choose Your Level</label>
        <div class="level-grid">
          <button class="level-btn ${state.level === 'A1' ? 'selected' : ''}" onclick="selectLevel('A1')">
            <div class="level-name">A1 - Beginner</div>
            <div class="level-desc">Using an ATM (5 questions)</div>
          </button>
          <button class="level-btn ${state.level === 'A2B1' ? 'selected' : ''}" onclick="selectLevel('A2B1')">
            <div class="level-name">A2/B1 - Intermediate</div>
            <div class="level-desc">ATMs and Mobile Banking Apps (5 questions)</div>
          </button>
          <button class="level-btn ${state.level === 'B2C1' ? 'selected' : ''}" onclick="selectLevel('B2C1')">
            <div class="level-name">B2/C1 - Advanced</div>
            <div class="level-desc">Digital Banking Evolution (5 questions)</div>
          </button>
        </div>
      </div>
      
      <button class="btn btn-primary" onclick="startVideo()" id="startBtn" disabled>
        Start Lesson ‚Üí
      </button>
    </div>
    
    <p class="footer-note">SQA Education ‚Ä¢ Banking & Money Management Course</p>
  `;
}

function renderVideo() {
  const levelLabel = state.level === 'A1' ? 'A1' : state.level === 'A2B1' ? 'A2/B1' : 'B2/C1';
  const videoUrl = VIDEO_URLS[state.level];
  const hasVideo = videoUrl && !videoUrl.includes('YOUR_');
  
  return `
    <div class="header">
      <span class="week-badge">WEEK 4 ‚Ä¢ ${levelLabel}</span>
      <h1>Watch the Video</h1>
      <p class="subtitle">Watch the video, then read and answer questions</p>
    </div>
    
    <div class="video-container">
      ${hasVideo ? `
        <iframe src="${videoUrl}" allowfullscreen></iframe>
      ` : `
        <div class="video-placeholder">
          <div class="video-placeholder-icon">üé¨</div>
          <div class="video-placeholder-text">Video coming soon!<br>Click "Continue to Reading" below.</div>
        </div>
      `}
    </div>
    
    <div class="watch-note">
      <div class="watch-note-icon">üí°</div>
      <div class="watch-note-text">Watch the video carefully. You can pause and replay as needed.</div>
    </div>
    
    <button class="btn btn-primary" onclick="startReading()">
      Continue to Reading ‚Üí
    </button>
  `;
}

function renderReading() {
  const reading = READINGS[state.level];
  const levelLabel = state.level === 'A1' ? 'A1' : state.level === 'A2B1' ? 'A2/B1' : 'B2/C1';
  const questionCount = QUESTIONS[state.level].length;
  
  return `
    <div class="header">
      <span class="week-badge">WEEK 4 ‚Ä¢ ${levelLabel}</span>
      <h1>Read the Guide</h1>
      <p class="subtitle">Read carefully, then answer ${questionCount} questions</p>
    </div>
    
    <button class="audio-btn" onclick="speakReading()">
      üîä Listen to Reading
    </button>
    
    <div class="reading-content">
      <div class="reading-title">üìñ ${reading.title}</div>
      ${reading.content}
    </div>
    
    <button class="btn btn-primary" onclick="startQuestions()">
      I'm Ready for Questions ‚Üí
    </button>
  `;
}

function renderQuestions() {
  const questions = QUESTIONS[state.level];
  const current = questions[state.currentQuestion];
  const progress = ((state.currentQuestion + 1) / questions.length) * 100;
  const levelLabel = state.level === 'A1' ? 'A1' : state.level === 'A2B1' ? 'A2/B1' : 'B2/C1';
  
  return `
    <div class="header" style="padding:20px 0">
      <span class="week-badge">WEEK 4 ‚Ä¢ ${levelLabel}</span>
    </div>
    
    <div class="progress-text">Question ${state.currentQuestion + 1} of ${questions.length}</div>
    <div class="progress-bar">
      <div class="progress-fill" style="width:${progress}%"></div>
    </div>
    
    <div class="question-card">
      <button class="audio-btn" onclick="speak('${current.q.replace(/'/g, "\\'")}')">
        üîä Listen
      </button>
      
      <div class="question-text">
        <span class="question-num">${state.currentQuestion + 1}</span>
        ${current.q}
      </div>
      
      <div class="options">
        ${current.options.map((opt, i) => `
          <div class="option ${state.answers[state.currentQuestion] === i ? 'selected' : ''}" onclick="selectAnswer(${i})">
            <span class="option-letter">${String.fromCharCode(65 + i)}</span>
            <span class="option-text">${opt}</span>
          </div>
        `).join('')}
      </div>
    </div>
    
    <div class="nav-row">
      ${state.currentQuestion > 0 ? `
        <button class="btn btn-secondary" onclick="prevQuestion()">‚Üê Back</button>
      ` : ''}
      <button class="btn btn-primary" onclick="nextQuestion()" ${state.answers[state.currentQuestion] === undefined ? 'disabled' : ''}>
        ${state.currentQuestion < questions.length - 1 ? 'Next ‚Üí' : 'See Results'}
      </button>
    </div>
  `;
}

function renderResults() {
  const questions = QUESTIONS[state.level];
  let correct = 0;
  
  questions.forEach((q, i) => {
    if (state.answers[i] === q.correct) correct++;
  });
  
  const percentage = Math.round((correct / questions.length) * 100);
  const passed = percentage >= 60;
  const levelLabel = state.level === 'A1' ? 'A1' : state.level === 'A2B1' ? 'A2/B1' : 'B2/C1';
  
  return `
    <div class="card">
      <div class="results-card">
        <div class="results-icon">${passed ? 'üéâ' : 'üìö'}</div>
        <div class="results-title">${passed ? 'Congratulations!' : 'Keep Practicing!'}</div>
        <div class="results-score">${correct} / ${questions.length}</div>
        <div style="font-size:1.3rem;margin-bottom:10px;">${percentage}%</div>
        <div class="results-message">
          ${passed ? 'You completed the Banking & Money Management course!' : 'Review the material and try again.'}
        </div>
        
        <div class="results-details">
          <div class="results-row">
            <span>Student Name:</span>
            <span>${state.name}</span>
          </div>
          <div class="results-row">
            <span>Level:</span>
            <span>${levelLabel}</span>
          </div>
          <div class="results-row">
            <span>Score:</span>
            <span>${correct}/${questions.length} (${percentage}%)</span>
          </div>
        </div>
        
        ${!state.submitted ? `
          <button class="btn btn-primary" onclick="submitResults()">
            ‚úì Submit My Results
          </button>
        ` : `
          <div class="submitted-msg">
            ‚úÖ Your results have been submitted!<br>
            üéì You completed Week 4 - Great job!
          </div>
        `}
        
        <div class="nav-row">
          <button class="btn btn-secondary" onclick="startOver()">Try Again</button>
        </div>
      </div>
    </div>
  `;
}

function selectLevel(level) {
  state.level = level;
  render();
  checkStartBtn();
}

function checkStartBtn() {
  const nameInput = document.getElementById('nameInput');
  const startBtn = document.getElementById('startBtn');
  if (nameInput && startBtn) {
    state.name = nameInput.value.trim();
    startBtn.disabled = !(state.name && state.level);
  }
}

function startVideo() {
  const nameInput = document.getElementById('nameInput');
  state.name = nameInput.value.trim();
  if (!state.name || !state.level) return;
  state.screen = 'video';
  render();
}

function startReading() {
  state.screen = 'reading';
  render();
}

function startQuestions() {
  state.screen = 'questions';
  state.currentQuestion = 0;
  state.answers = [];
  render();
}

function selectAnswer(index) {
  state.answers[state.currentQuestion] = index;
  render();
}

function prevQuestion() {
  if (state.currentQuestion > 0) {
    state.currentQuestion--;
    render();
  }
}

function nextQuestion() {
  const questions = QUESTIONS[state.level];
  if (state.currentQuestion < questions.length - 1) {
    state.currentQuestion++;
  } else {
    state.screen = 'results';
  }
  render();
}

function submitResults() {
  const questions = QUESTIONS[state.level];
  let correct = 0;
  questions.forEach((q, i) => {
    if (state.answers[i] === q.correct) correct++;
  });
  
  const levelLabel = state.level === 'A1' ? 'A1' : state.level === 'A2B1' ? 'A2/B1' : 'B2/C1';
  
  const formData = new FormData();
  formData.append(FORM_FIELDS.week, CURRENT_WEEK);
  formData.append(FORM_FIELDS.name, state.name);
  formData.append(FORM_FIELDS.level, levelLabel);
  formData.append(FORM_FIELDS.score, correct);
  formData.append(FORM_FIELDS.total, questions.length);
  
  fetch(GOOGLE_FORM_URL, {
    method: 'POST',
    mode: 'no-cors',
    body: formData
  }).then(() => {
    state.submitted = true;
    render();
  }).catch(err => {
    console.error('Submit error:', err);
    state.submitted = true;
    render();
  });
}

function startOver() {
  state.screen = 'start';
  state.currentQuestion = 0;
  state.answers = [];
  state.submitted = false;
  render();
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  render();
  document.addEventListener('input', (e) => {
    if (e.target.id === 'nameInput') {
      checkStartBtn();
    }
  });
});

render();
</script>
</body>
</html>
